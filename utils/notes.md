# Notes for util scripts

## Eval preparation for this system

#### For gold trees:

Usually, you have a gold line trees file. You want to use `delete_PU_nodes.py file-name 
corpus-name` to delete the punctuations in the file. This only needs to be done once.

#### For test trees:
The `MAP_constituent.py` can be used to calculate the PIoC MAP parse for each string in the corpus. Please
 refer to the notes below for this script. This generates a `Gzip` file, the
same as all the linetrees file output by the system.

For a test linetrees file from the output of the system, MAP or not, you first need to delete the 
punctuationn in that file using the same script `delete_PU_nodes.py`. Note that the linetrees files are natively
`Gzip` files, and `delete_PU_nodes.py` will convert it to a normal txt file with no unary branches.

Then you can use `EVALB` to compare the test file with the gold file.

## Individual utils

#### `check_tree_depth.py`
usage: `python check_tree_depth.py --linetrees some-linetrees-file`

This takes a linetrees file, and return the number of trees with a certain depth.

------

#### `delete_PU_nodes.py`
usage: `python delete_PU_nodes.py --file some-linetrees-file --style some-corpus-style`

This takes a linetrees file, and deletes all the punctuation in that file according to
the definition of punctuation from some corpus. The options for corpus style include `ctb`,
`wsj`, `negra` and `all`.

--------

#### `make_ints_file.py`

usage: `python make_ints_file.py some-line-file`

This takes a linetoks file (a sentence-by-line delimited-by-space file) and outputs two files `*
.ints.txt` and `.dict` to be used by the sampler.

---------

#### `MAP_constituent.py`

usage: `python MAP_constituent.py output_dir1 output_dir2 output_dir3 --process n --output-fn some-filename
--max-iter the-maximum-iteration-number --min-iter the-minimun-iteration-number`

This script performs posterior inference on constituents with several output directories with
linetrees files generated by the system. The process number `n` indicates how many
concurrent processes to be run to speed up the inference, `output-fn` is where
the results will be written, and `max-iter` and `min-iter` are the span of usable
iterations. For example, if you want to use all samples from the 550th iteration to
the 650th iteration, then the `max-iter` is 650 and `min-iter` is 550. This applies
to all output directories given.

--------

#### `pprint_linetrees.py`

usage: `python pprint_linetrees.py --linetrees some-linetrees-file`

This converts a linetrees file into a pplinetrees file, which contains the same trees but in a 
more readable format. (ASCii art) This does not work very well with non-ASCii
characters.





